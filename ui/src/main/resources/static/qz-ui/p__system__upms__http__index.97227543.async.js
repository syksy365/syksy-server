"use strict";(self.webpackChunkqing_zhou=self.webpackChunkqing_zhou||[]).push([[708],{97823:function(e,t,r){var n=r(75782),a=r(58733),i=r(4637),u=r(59496),l=r(54021),s=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],o=u.forwardRef((function(e,t){var r=e.fieldProps,u=e.unCheckedChildren,o=e.checkedChildren,c=e.proFieldProps,p=(0,a.Z)(e,s);return(0,i.jsx)(l.Z,(0,n.Z)({valueType:"switch",fieldProps:(0,n.Z)({unCheckedChildren:u,checkedChildren:o},r),ref:t,valuePropName:"checked",proFieldProps:c,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},p))}));t.Z=o},24046:function(e,t,r){var n=r(75782),a=r(58733),i=r(4637),u=r(59496),l=r(54021),s=["fieldProps","proFieldProps"],o=function(e,t){var r=e.fieldProps,u=e.proFieldProps,o=(0,a.Z)(e,s);return(0,i.jsx)(l.Z,(0,n.Z)({ref:t,valueType:"textarea",fieldProps:r,proFieldProps:u},o))};t.Z=u.forwardRef(o)},17113:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(57213),a=r.n(n),i=r(25359),u=r.n(i),l=r(49811),s=r.n(l),o=r(54306),c=r.n(o),p=r(1618),d=r(30264),f=r(30582),h=r(64993),x=r(86061),v=r(61506),m=r(61391),P=r(26659),w=r(25389),k=r(59496),y=r(35195),b=r(39129),Z=r(65686),C=r(97823),j=r(75782),T=r(58733),g=r(4637),I=r(77025),E=r(19090),q=r(54021),F=["fieldProps","proFieldProps"],V="dateTimeRange",R=k.forwardRef((function(e,t){var r=e.fieldProps,n=e.proFieldProps,a=(0,T.Z)(e,F),i=(0,k.useContext)(E.Z);return(0,g.jsx)(q.Z,(0,j.Z)({ref:t,fieldProps:(0,j.Z)({getPopupContainer:i.getPopupContainer},r),valueType:V,proFieldProps:n,filedConfig:{valueType:V,lightFilterLabelFormatter:function(e){return(0,I.Z)(e,"YYYY-MM-DD HH:mm:ss")}}},a))})),M=r(24046);function Y(){return(Y=s()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,w.request)("/qz/api/upms/route/list",{params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return O.apply(this,arguments)}function O(){return(O=s()(u()().mark((function e(){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,w.request)("/qz/api/upms/route/overload",{method:"post"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return A.apply(this,arguments)}function A(){return(A=s()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,w.request)("/qz/api/upms/route/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return L.apply(this,arguments)}function L(){return(L=s()(u()().mark((function e(t,r){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,w.request)("/qz/api/upms/route/".concat(r),{method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return G.apply(this,arguments)}function G(){return(G=s()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,w.request)("/qz/api/upms/route/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(e){var t=(0,k.useRef)();(0,k.useEffect)((function(){var r;e.initialValues&&(null==t||null===(r=t.current)||void 0===r||r.setFieldsValue(e.initialValues))}),[e.initialValues,e.modalVisible]);var r=e.modalVisible,n=e.onVisibleChange,a=e.saveCallBack,i=function(){var t=s()(u()().mark((function t(r){return u()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(r,e.initialValues.id);case 2:return a(),t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,g.jsxs)(Z.Y,{formRef:t,title:"接口编辑",modalProps:{maskClosable:!1,destroyOnClose:!0},width:"500px",visible:r,onVisibleChange:function(e){return n(e)},onFinish:function(){var e=s()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,g.jsx)(C.Z,{name:"onOff",label:"启停"}),(0,g.jsx)(R,{name:"validPeriod",label:"接口有效期",allowClear:!0,fieldProps:{allowEmpty:[!0,!0],getPopupContainer:function(e){return e.parentElement}}}),(0,g.jsx)(y.Z.Item,{label:"校验类型",name:"checkType",children:(0,g.jsxs)(b.ZP.Group,{children:[(0,g.jsx)(b.ZP,{value:-1,children:"免登录"}),(0,g.jsx)(b.ZP,{value:0,children:"登录"}),(0,g.jsx)(b.ZP,{value:1,children:"授权"})]})}),(0,g.jsx)(M.Z,{name:"remark",label:"备注"})]})},_=function(){var e=(0,w.useAccess)(),t=(0,k.useRef)(),r=(0,k.useState)(!1),n=c()(r,2),i=n[0],l=n[1],o=(0,k.useState)(),y=c()(o,2),b=y[0],Z=y[1],C=(0,k.useState)(!1),j=c()(C,2),T=j[0],I=j[1],E=function(){var e=s()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:r=e.sent,Z(r.data),l(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=s()(u()().mark((function e(r){var n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(r);case 2:null===(n=t.current)||void 0===n||n.reload();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=s()(u()().mark((function e(){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!0),D().then((function(){var e;I(!1),null===(e=t.current)||void 0===e||e.reload()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=[{title:"序号",dataIndex:"index",valueType:"index",width:"47px",fixed:"left",filters:!1},v.Z.EXPAND_COLUMN,{title:"方法",width:"70px",search:!1,dataIndex:"requestMethod",filters:!0,filterMultiple:!0,valueEnum:{GET:{text:"GET"},POST:{text:"POST"},PUT:{text:"PUT"},DELETE:{text:"DELETE"},"*":{text:"*"}}},{title:"在线",search:!1,width:"80px",align:"center",dataIndex:"online",filters:!0,filterMultiple:!1,valueType:"select",valueEnum:{true:{text:"在线",status:"Processing"},false:{text:"离线",status:"Default"}}},{title:"启停",width:"80px",align:"center",search:!1,dataIndex:"onOff",filters:!0,filterMultiple:!1,valueEnum:{true:{text:"启用",status:"Processing"},false:{text:"停用",status:"Default"}}},{title:"校验类型",width:"120px",align:"center",search:!1,dataIndex:"checkType",filters:!0,filterMultiple:!1,valueEnum:{"-1":{text:(0,g.jsx)(m.Z,{color:"#52c41a",children:"免登录"})},0:{text:(0,g.jsx)(m.Z,{color:"#13c2c2",children:"登录"})},1:{text:(0,g.jsx)(m.Z,{color:"#1890ff",children:"授权"})}}},{title:"路径模板",filters:!1,dataIndex:"pattern"},{title:"处理方法",filters:!1,dataIndex:"handlerMethod",hideInTable:!0},{filters:!1,title:"操作",align:"center",width:100,valueType:"option",render:function(t,r){var n=new Array;return n.push((0,g.jsx)(P.Z,{type:"link",disabled:!e.canOperate("API资源-编辑"),onClick:function(){return E(r.id)},children:"编辑"},"edit")),r.online||n.push((0,g.jsx)(P.Z,{type:"link",disabled:!e.canOperate("API资源-删除"),onClick:function(){return q(r.id)},children:"删除"},"edit")),n}}];return(0,g.jsxs)(h.ZP,{children:[(0,g.jsx)(x.Z,{toolbar:{actions:[(0,g.jsx)(P.Z,{type:"primary",size:"small",disabled:!e.canOperate("全局API资源扫描"),loading:T,onClick:function(){return F()},children:"全局API资源扫描"},"http")]},actionRef:t,expandable:{expandedRowRender:function(e){return function(e){return(0,g.jsxs)(f.vY,{column:2,children:[(0,g.jsx)(f.vY.Item,{label:"开始时间",valueType:"dateTime",contentStyle:{marginRight:"48px"},children:e.startDate}),(0,g.jsx)(f.vY.Item,{label:"结束时间",valueType:"dateTime",children:e.endDate}),(0,g.jsx)(f.vY.Item,{span:2,label:"处理方法",children:e.handlerMethod}),(0,g.jsx)(f.vY.Item,{span:2,label:"备注",children:e.remark})]})}(e)},expandIcon:function(e){var t=e.expanded,r=e.onExpand,n=e.record;return t?(0,g.jsx)(p.Z,{onClick:function(e){return r(n,e)}}):(0,g.jsx)(d.Z,{onClick:function(e){return r(n,e)}})}},rowKey:"id",search:{labelWidth:"auto"},request:function(e,t,r){return function(e){return Y.apply(this,arguments)}(a()(a()({},e),{},{sorter:t,filter:r})).then((function(e){return e.data}))},columns:V}),(0,g.jsx)(U,{initialValues:b,onVisibleChange:function(e){return l(e)},modalVisible:i,saveCallBack:function(){var e;null===(e=t.current)||void 0===e||e.reload()}})]})}}}]);