"use strict";(self.webpackChunksyksy_web=self.webpackChunksyksy_web||[]).push([[487],{36910:function(e,t,n){var r=n(75782),i=n(58733),a=n(4637),s=n(87441),u=n(59496),c=n(19090),o=n(54021),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],p=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],d=u.forwardRef((function(e,t){var n=e.fieldProps,p=e.children,d=e.params,f=e.proFieldProps,h=e.mode,m=e.valueEnum,x=e.request,v=e.showSearch,w=e.options,b=(0,i.Z)(e,l),y=(0,u.useContext)(c.Z);return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(m),request:x,params:d,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:w,mode:h,showSearch:v,getPopupContainer:y.getPopupContainer},n),ref:t,proFieldProps:f},b),{},{children:p}))})),f=u.forwardRef((function(e,t){var n=e.fieldProps,l=e.children,d=e.params,f=e.proFieldProps,h=e.mode,m=e.valueEnum,x=e.request,v=e.options,w=(0,i.Z)(e,p),b=(0,r.Z)({options:v,mode:h||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},n),y=(0,u.useContext)(c.Z);return(0,a.jsx)(o.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(m),request:x,params:d,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:y.getPopupContainer},b),ref:t,proFieldProps:f},w),{},{children:l}))})),h=d;h.SearchSelect=f,h.displayName="ProFormComponent",t.Z=h},24046:function(e,t,n){var r=n(75782),i=n(58733),a=n(4637),s=n(59496),u=n(54021),c=["fieldProps","proFieldProps"],o=function(e,t){var n=e.fieldProps,s=e.proFieldProps,o=(0,i.Z)(e,c);return(0,a.jsx)(u.Z,(0,r.Z)({ref:t,valueType:"textarea",fieldProps:n,proFieldProps:s},o))};t.Z=s.forwardRef(o)},67762:function(e,t,n){n.r(t),n.d(t,{default:function(){return qe}});var r=n(57213),i=n.n(r),a=n(25359),s=n.n(a),u=n(49811),c=n.n(u),o=n(54306),l=n.n(o),p=n(59496),d=n(64993),f=n(81347),h=n(44698),m=n(25389),x=n(17597),v=n(90331),w=n(7157),b=n(26659),y=n(61391),g=n(22719);function k(e){return C.apply(this,arguments)}function C(){return(C=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/page",{params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return Z.apply(this,arguments)}function Z(){return(Z=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic",{params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return V.apply(this,arguments)}function V(){return(V=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return z.apply(this,arguments)}function z(){return(z=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic",{method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return S.apply(this,arguments)}function S(){return(S=c()(s()().mark((function e(t,n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/".concat(t),{method:"put",data:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return N.apply(this,arguments)}function N(){return(N=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O="dic___YVBvz",R=n(76384),E=n(86061);function A(e){return B.apply(this,arguments)}function B(){return(B=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/list/page",{params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return(D=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/list/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return K.apply(this,arguments)}function K(){return(K=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/list",{method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return Y.apply(this,arguments)}function Y(){return(Y=c()(s()().mark((function e(t,n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/list/".concat(t),{method:"put",data:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return G.apply(this,arguments)}function G(){return(G=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/list/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=n(54689),J=n.n(H),Q=n(65686),U=n(36910),W=n(6333),X=n(24046),$=n(4637),ee=function(e){var t=(0,p.useRef)();(0,p.useEffect)((function(){if(e.modalVisible){var n,r;if(e.formConfig.isNew)null==t||null===(n=t.current)||void 0===n||n.resetFields();if(e.formConfig.initialValues)null==t||null===(r=t.current)||void 0===r||r.setFieldsValue(e.formConfig.initialValues)}}),[e.formConfig.initialValues,e.formConfig.isNew,e.modalVisible]);var n=e.modalVisible,r=e.onVisibleChange,i=e.saveCallBack,a=function(){var e=c()(s()().mark((function e(t){var n,r,i,a,u;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.genre="list",e.next=3,j(t);case 3:n=e.sent,r=new Array,i=J()(n.data);try{for(i.s();!(a=i.n()).done;)u=a.value,r.push({label:u.name,value:u.id})}catch(e){i.e(e)}finally{i.f()}return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var t=c()(s()().mark((function t(n){return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.formConfig.isNew){t.next=5;break}return t.next=3,_(n);case 3:t.next=7;break;case 5:return t.next=7,L(e.formConfig.initialValues.id,n);case 7:return i(),t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,$.jsxs)(Q.Y,{title:e.formConfig.title,width:"380px",formRef:t,modalProps:{maskClosable:!1},visible:n,onVisibleChange:function(e){return r(e)},onFinish:function(){var e=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,$.jsx)(U.Z,{width:"md",name:"dicId",label:"类目",hasFeedback:!0,request:function(e){return a({params:e})},rules:[{required:!0,message:"请选择类目!",type:"string"}],fieldProps:{showSearch:!0,optionFilterProp:"label",getPopupContainer:function(e){return e.parentElement}}}),(0,$.jsx)(W.Z,{name:"name",label:"名称",tooltip:"最长为 20 位",rules:[{required:!0,message:"请输入名称!"}]}),(0,$.jsx)(W.Z,{name:"code",label:"编码",tooltip:"最长为 20 位",rules:[{required:!0,message:"请输入编码!"}]}),(0,$.jsx)(X.Z,{name:"customize",label:"自定义"})]})},te=function(e){var t=(0,m.useAccess)(),n=x.Z.confirm,r=(0,p.useRef)(),a=(0,p.useState)(!1),u=l()(a,2),o=u[0],d=u[1],f=(0,p.useState)({dicId:e.dicId}),h=l()(f,2),v=h[0],w=h[1],y=(0,p.useState)({title:"新建项",isNew:!0}),k=l()(y,2),C=k[0],j=k[1],Z=function(){var e=c()(s()().mark((function e(t){var n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:n=e.sent,j({title:"编辑项",isNew:!1,initialValues:n.data}),d(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=[{title:"名称",dataIndex:"name",sorter:function(e,t){return e.name-t.name},formItemProps:{rules:[{required:!0,message:"名称为必填项"}]},filters:!1},{title:"编码",dataIndex:"code",sorter:function(e,t){return e.code-t.code},filters:!1},{title:"操作",valueType:"option",align:"center",filters:!1,width:"90px",render:function(e,i){return[(0,$.jsx)(b.Z,{type:"link",size:"small",disabled:!t.canOperate("项-列表-编辑"),onClick:function(){return Z(i.id)},children:"编辑"},"edit"),(0,$.jsx)(b.Z,{type:"link",size:"small",disabled:!t.canOperate("项-列表-删除"),onClick:function(){return e=i.id,void n({title:"确定删除吗?",icon:(0,$.jsx)(g.Z,{}),onOk:function(){return c()(s()().mark((function t(){var n;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:null===(n=r.current)||void 0===n||n.reload();case 3:case"end":return t.stop()}}),t)})))()}});var e},children:"删除"},"delete")]}}],V=function(){var e=c()(s()().mark((function e(t){var n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){j({title:"新建项-列表",isNew:!0,initialValues:{dicId:e.dicId}}),d(!0)};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(E.Z,{actionRef:r,columns:q,rowKey:"id",search:!1,cardBordered:!0,pagination:{showSizeChanger:!0},params:{dicId:e.dicId},request:function(e,t,n){return V(i()(i()({},e),{},{sorter:t,filter:n}))},toolbar:{search:{allowClear:!0,placeholder:"请输入名称或编码",onSearch:function(e){var t=Object.assign({},v);t.pattern=e,w(t)}},actions:[(0,$.jsx)($.Fragment,{children:e.dicId&&t.canOperate("项-列表-新建")?(0,$.jsx)(b.Z,{type:"primary",size:"small",onClick:function(){P()},children:"新建"},"add"):(0,$.jsx)(R.Z,{title:e.dicId?"无权限":"请先选择左侧类目",children:(0,$.jsx)(b.Z,{type:"primary",size:"small",disabled:!0,onClick:function(){P()},children:"新建"},"add")})})]}}),(0,$.jsx)(ee,{formConfig:C,saveCallBack:function(){var e;null===(e=r.current)||void 0===e||e.reload()},onVisibleChange:function(e){return d(e)},modalVisible:o})]})},ne=n(61506),re=n(35195),ie=n(85887);function ae(e){return se.apply(this,arguments)}function se(){return(se=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/tree",{params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=c()(s()().mark((function e(t,n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/tree/expand/".concat(t),{method:"put",params:{expand:n}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return oe.apply(this,arguments)}function oe(){return(oe=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/tree",{method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t){return pe.apply(this,arguments)}function pe(){return(pe=c()(s()().mark((function e(t,n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/tree/".concat(t),{method:"put",data:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return(fe=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/tree/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return me.apply(this,arguments)}function me(){return(me=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/tree/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t){return ve.apply(this,arguments)}function ve(){return(ve=c()(s()().mark((function e(t,n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/qz/api/setting/dic/item/tree/level/".concat(t),{params:{dicId:n}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we=function(e){var t=(0,p.useRef)();(0,p.useEffect)((function(){if(e.modalVisible){var n,r;if(e.formConfig.isNew)null==t||null===(n=t.current)||void 0===n||n.resetFields();if(e.formConfig.initialValues)null==t||null===(r=t.current)||void 0===r||r.setFieldsValue(e.formConfig.initialValues)}}),[e.formConfig.initialValues,e.formConfig.isNew,e.modalVisible]);var n=e.modalVisible,r=e.onVisibleChange,i=e.saveCallBack,a=function(){var e=c()(s()().mark((function e(t){var n,r,i,a,u;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.genre="tree",e.next=3,j(t);case 3:n=e.sent,r=new Array,i=J()(n.data);try{for(i.s();!(a=i.n()).done;)u=a.value,r.push({label:u.name,value:u.id})}catch(e){i.e(e)}finally{i.f()}return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var t=c()(s()().mark((function t(n){return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.formConfig.isNew){t.next=5;break}return t.next=3,ce(n);case 3:t.next=7;break;case 5:return t.next=7,le(e.formConfig.initialValues.id,n);case 7:return i(),t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,$.jsxs)(Q.Y,{title:e.formConfig.title,width:"380px",formRef:t,modalProps:{maskClosable:!1},visible:n,onVisibleChange:function(e){return r(e)},onFinish:function(){var e=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,$.jsx)(re.Z.Item,{name:"levelIds",label:"上级",children:(0,$.jsx)(ie.Z,{fieldNames:{label:"name",value:"id",children:"children"},options:e.formConfig.treeData,changeOnSelect:!0,getPopupContainer:function(e){return e.parentElement}})}),(0,$.jsx)(U.Z,{width:"md",name:"dicId",label:"类目",hasFeedback:!0,request:function(e){return a({params:e})},rules:[{required:!0,message:"请选择类目!",type:"string"}],fieldProps:{showSearch:!0,optionFilterProp:"label",getPopupContainer:function(e){return e.parentElement}}}),(0,$.jsx)(W.Z,{name:"name",label:"名称",tooltip:"最长为 20 位",rules:[{required:!0,message:"请输入名称!"}]}),(0,$.jsx)(W.Z,{name:"code",label:"编码",tooltip:"最长为 20 位",rules:[{required:!0,message:"请输入编码!"}]}),(0,$.jsx)(X.Z,{name:"customize",label:"自定义"})]})};function be(e,t){return e.map((function(e){e.expand&&t.push(e.id),e.children&&be(e.children,t)}))}var ye=function(e){var t=(0,m.useAccess)(),n=(0,p.useState)(),r=l()(n,2),i=r[0],a=r[1],u=(0,p.useState)(new Array),o=l()(u,2),d=o[0],f=o[1],h=function(){var t=c()(s()().mark((function t(){var n,r;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dicId){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,ae({dicId:e.dicId});case 4:n=t.sent,a(n.data),r=new Array,be(n.data,r),f(r);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,p.useEffect)((function(){h()}),[]);var v=x.Z.confirm,w=(0,p.useState)(!1),y=l()(w,2),k=y[0],C=y[1],j=(0,p.useState)({title:"新建项",isNew:!0,initialValues:{dicId:e.dicId},treeData:i}),Z=l()(j,2),q=Z[0],V=Z[1],P=function(){var e=c()(s()().mark((function e(t){var n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t);case 2:n=e.sent,V({title:"编辑项-树",isNew:!1,initialValues:n.data,treeData:i}),C(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var t=c()(s()().mark((function t(n){var r,a;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,xe(n,e.dicId);case 3:a=t.sent,r=a.data;case 5:V({title:"新建项-树",isNew:!0,initialValues:{dicId:e.dicId,levelIds:r},treeData:i}),C(!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(e,t){var n=new Array;e?(n=d.slice()).push(t.id):n=d.filter((function(e){return e!==t.id})),f(n),function(e,t){ue.apply(this,arguments)}(t.id,e)},S=[{title:"名称",dataIndex:"name"},{title:"编码",dataIndex:"code",width:"200px",ellipsis:!0},{title:"操作",align:"center",width:"180px",render:function(e,n){return[(0,$.jsx)(b.Z,{type:"link",size:"small",disabled:!t.canOperate("项-树-新建"),onClick:function(){return z(n.id)},children:"新建"},"add"),(0,$.jsx)(b.Z,{type:"link",size:"small",disabled:!t.canOperate("项-树-编辑"),onClick:function(){return P(n.id)},children:"编辑"},"edit"),(0,$.jsx)(b.Z,{type:"link",size:"small",disabled:!t.canOperate("项-树-删除"),onClick:function(){return e=n.id,void v({title:"确定删除吗?",icon:(0,$.jsx)(g.Z,{}),onOk:function(){return c()(s()().mark((function t(){return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de(e);case 2:h();case 3:case"end":return t.stop()}}),t)})))()}});var e},children:"删除"},"delete")]}}];return(0,$.jsxs)("div",{children:[(0,$.jsx)(ne.Z,{title:function(){return e.dicId&&t.canOperate("项-树-新建")?(0,$.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,$.jsx)(b.Z,{type:"primary",size:"small",onClick:function(){z()},children:"新建"},"add")}):(0,$.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,$.jsx)(R.Z,{title:e.dicId?"无权限":"请先选择左侧类目",children:(0,$.jsx)(b.Z,{type:"primary",size:"small",disabled:!0,onClick:function(){z()},children:"新建"},"add")})})},bordered:!0,pagination:!1,columns:S,rowKey:"id",dataSource:i,expandable:{expandedRowKeys:d,onExpand:function(e,t){return I(e,t)}}}),(0,$.jsx)(we,{formConfig:q,saveCallBack:function(){h()},onVisibleChange:function(e){return C(e)},modalVisible:k})]})},ge=n(39129),ke=function(e){var t=(0,p.useRef)();(0,p.useEffect)((function(){var n,r;e.isNew&&(null==t||null===(n=t.current)||void 0===n||n.resetFields());e.initialValues&&(null==t||null===(r=t.current)||void 0===r||r.setFieldsValue(e.initialValues))}),[e.initialValues,e.isNew,e.modalVisible]);var n=e.modalVisible,r=e.onVisibleChange,i=e.saveCallBack,a=function(){var t=c()(s()().mark((function t(n){return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isNew){t.next=5;break}return t.next=3,P(n);case 3:t.next=7;break;case 5:return t.next=7,I(e.initialValues.id,n);case 7:return i(),t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,$.jsxs)(Q.Y,{formRef:t,title:e.title,modalProps:{maskClosable:!1,destroyOnClose:!0},width:"380px",visible:n,onVisibleChange:function(e){return r(e)},onFinish:function(){var e=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,$.jsx)(re.Z.Item,{label:"类型",name:"genre",rules:[{required:!0,message:"请选择类型!"}],children:(0,$.jsxs)(ge.ZP.Group,{disabled:!e.isNew,children:[(0,$.jsx)(ge.ZP,{value:"list",children:"列表"}),(0,$.jsx)(ge.ZP,{value:"tree",children:"树"})]})}),(0,$.jsx)(W.Z,{name:"name",label:"名称",tooltip:"最长为 20 位",rules:[{required:!0,message:"请输入名称!"}]}),(0,$.jsx)(X.Z,{name:"remark",label:"备注"})]})},Ce=x.Z.confirm,je=v.Z.Search,Ze=w.Z.Option,qe=function(){var e=(0,m.useAccess)(),t=(0,p.useRef)(),n=(0,p.useState)(!1),r=l()(n,2),a=r[0],u=r[1],o=(0,p.useState)(),x=l()(o,2),v=x[0],C=x[1],j=(0,p.useState)("list"),Z=l()(j,2),V=Z[0],P=Z[1],z=(0,p.useState)(),I=l()(z,2),S=I[0],N=I[1],R=(0,p.useState)({title:"新建类目",isNew:!0}),E=l()(R,2),A=E[0],B=E[1],T=function(){var e=c()(s()().mark((function e(t){var n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=c()(s()().mark((function e(t){var n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:n=e.sent,B({title:"修改类目",isNew:!1,initialValues:n.data}),u(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_={type:"radio",onSelect:function(e){C(e.id),P(e.genre)}},K=(0,p.useState)(),L=l()(K,2),Y=L[0],M=L[1],G=(0,p.useState)(),H=l()(G,2),J=H[0],Q=H[1];return(0,$.jsxs)(d.ZP,{children:[(0,$.jsxs)(f.Z,{split:"vertical",children:[(0,$.jsx)(f.Z,{className:O,title:"类目",extra:(0,$.jsx)(b.Z,{type:"primary",disabled:!e.canOperate("类目-新建"),size:"small",onClick:function(){return B({title:"新建类目",isNew:!0,initialValues:{genre:"list"}}),void u(!0)},children:"新建"},"add"),bordered:!0,headerBordered:!0,colSpan:{xs:"120px",sm:"170px",md:"300px",lg:"450px",xl:"450px"},children:(0,$.jsx)(h.Rs,{actionRef:t,headerTitle:(0,$.jsxs)("span",{children:[(0,$.jsx)(je,{placeholder:"请输入名称",allowClear:!0,onSearch:function(e){M(e),N({name:e,genre:J})},style:{width:180}}),(0,$.jsxs)(w.Z,{placeholder:"请选择类型",allowClear:!0,onChange:function(e){Q(e),N({name:Y,genre:e})},style:{width:120,marginLeft:10},children:[(0,$.jsx)(Ze,{value:"list",children:"列表"}),(0,$.jsx)(Ze,{value:"tree",children:"树"})]})]}),pagination:{defaultPageSize:10,hideOnSinglePage:!0,simple:!0,size:"small"},size:"small",rowKey:"id",params:S,request:function(e,t,n){return T(i()(i()({},e),{},{sorter:t,filter:n}))},split:!0,tableAlertRender:!1,rowSelection:_,showActions:"hover",metas:{title:{dataIndex:"name"},subTitle:{dataIndex:"genre",render:function(e){return"list"==e?(0,$.jsx)(y.Z,{color:"blue",children:"列表"}):(0,$.jsx)(y.Z,{color:"#5BD8A6",children:"树"})}},description:{dataIndex:"remark"},actions:{render:function(n,r){if(!r.fixed)return[(0,$.jsx)(b.Z,{type:"link",size:"small",disabled:!e.canOperate("类目-编辑"),onClick:function(){return D(r.id)},children:"编辑"},"edit"),(0,$.jsx)(b.Z,{type:"link",size:"small",disabled:!e.canOperate("类目-删除"),onClick:function(){return e=r.id,void Ce({title:"确定删除吗?",icon:(0,$.jsx)(g.Z,{}),onOk:function(){return c()(s()().mark((function n(){var r;return s()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F(e);case 2:null===(r=t.current)||void 0===r||r.reload();case 3:case"end":return n.stop()}}),n)})))()}});var e},children:"删除"},"delete")]}}}})}),(0,$.jsxs)(f.Z,{title:"项",bordered:!0,headerBordered:!0,children:["list"==V&&(0,$.jsx)(te,{dicId:v}),"tree"==V&&(0,$.jsx)(ye,{dicId:v})]})]}),(0,$.jsx)(ke,{title:A.title,isNew:A.isNew,initialValues:A.initialValues,onVisibleChange:function(e){return u(e)},modalVisible:a,saveCallBack:function(){var e;null===(e=t.current)||void 0===e||e.reload()}})]})}}}]);